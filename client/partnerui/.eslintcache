[{"/home/mack/Documents/Admin/Admin-App/client/partnerui/src/index.js":"1","/home/mack/Documents/Admin/Admin-App/client/partnerui/src/App.js":"2","/home/mack/Documents/Admin/Admin-App/client/partnerui/src/components/partners/partnersAdmin.js":"3","/home/mack/Documents/Admin/Admin-App/client/partnerui/src/components/socket.js":"4"},{"size":627,"mtime":1613560389842,"results":"5","hashOfConfig":"6"},{"size":362,"mtime":1613559781958,"results":"7","hashOfConfig":"6"},{"size":14064,"mtime":1613819483563,"results":"8","hashOfConfig":"6"},{"size":385,"mtime":1613772737184,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1v3ldsr",{"filePath":"12","messages":"13","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"14","messages":"15","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"16"},{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/mack/Documents/Admin/Admin-App/client/partnerui/src/index.js",[],"/home/mack/Documents/Admin/Admin-App/client/partnerui/src/App.js",[],"/home/mack/Documents/Admin/Admin-App/client/partnerui/src/components/partners/partnersAdmin.js",["19","20","21","22","23","24","25","26","27","28"],"import React, { useState, useEffect } from 'react'\n//import io from 'socket.io-client'\nimport socket from '../socket'\nimport { FaUserAlt } from \"react-icons/fa\"\nimport \"./partnersAdmin.css\"\nimport queryString from 'query-string'\n\n\n/**\n * @function useLocalStorage: Works like useState except add persistence of data upon reload\n * @param {string} key \n * @param {any type} initialValue \n */\nfunction useLocalStorage(key, initialValue) {\n    // State to store our value\n    // Pass initial state function to useState so logic is only executed once\n    const [storedValue, setStoredValue] = useState(() => {\n      try {\n        // Get from local storage by key\n        const item = window.localStorage.getItem(key);\n        // Parse stored json or if none return initialValue\n        return item ? JSON.parse(item) : initialValue;\n      } catch (error) {\n        // If error also return initialValue\n        console.log(error);\n        return initialValue;\n      }\n    });\n  \n    // Return a wrapped version of useState's setter function that ...\n    // ... persists the new value to localStorage.\n    const setValue = value => {\n      try {\n        // Allow value to be a function so we have same API as useState\n        const valueToStore =\n          value instanceof Function ? value(storedValue) : value;\n        // Save state\n        setStoredValue(valueToStore);\n        // Save to local storage\n        window.localStorage.setItem(key, JSON.stringify(valueToStore));\n      } catch (error) {\n        // A more advanced implementation would handle the error case\n        console.log(error);\n      }\n    };\n  \n    return [storedValue, setValue];\n}\n\n// Driver row\n\nconst DriverRow = (props) => {\n    return(\n        <tr>\n            <td><FaUserAlt size={30}/></td>\n            <td>{ props.driver.name}</td>\n            <td>{ props.driver.surname }</td>\n            <td>{ props.driver.phone_number }</td>\n            <td>{ props.driver.taxi_number }</td>\n            <td>{ props.driver.plate_number }</td>\n            <td>{ props.driver.car_brand }</td>\n            <td>{ props.driver.status }</td>\n            <td> { props.driver.totalMoneyToday }</td>\n            <td>{ props.driver.todaytrip }</td>\n            <td>{ props.driver.totalmoney}</td>             \n            <td>{ props.driver.totaltrip}</td>\n            \n        </tr>\n    )\n}\n\n// Initialize interval\nvar interval = null\n\nexport default function PartnersAdmin() {\n    // Initialize socket connection\n    /*var ENDPOINT = 'localhost:10014'\n    var socket = io(ENDPOINT, {\n                    transports: ['websocket', 'polling', 'flashsocket'],\n                    reconnection: true,\n                    reconnectionAttempts: Infinity})   */\n    \n    //Initialize state variables\n    let [name, setName] = useState(null)\n    let [email, setEmail] = useState(null)\n    let [password, setPassword] = useState(null)\n    var [test, setTest] = useState(\"\")\n    // Use LocalStorage to preserve authentication state\n    let [authenticated, setAuthentication] = useLocalStorage(\"authenticated\", false)\n\n    let [partnerDrivers, setPartnerDrivers] = useState([])\n    let [driversCount, setDriversCount] = useState(0)\n    let [totalMoney, setTotalMoney] = useState(0) \n    let [totalMoneyToday, setTotalMoneyToday] = useState(0)\n    let [allData, setAllData] = useState({})\n\n \n    const [details, setDetails] = useLocalStorage(\"details\", {name:\"\", email:\"\", password:\"\"})\n    const [error, setError] = useState(\"\")\n    \n\n    useEffect(() => {\n        \n        if(authenticated) {\n            setName(details.name)\n            if(interval === null) {\n\n                interval = setInterval(() => {\n                    console.log(\"Counting......\")\n    \n                    socket.emit(\"getPartnerData\", { provider: details.name })\n        \n                    socket.on(\"getPartnerData-response\", (data) => {\n                        console.log(\"getting getPartnerData-response data\")\n\n                        if ((data !== undefined) || (data != null)) {\n                            setPartnerDrivers([...data[\"drivers\"]])\n                            setTotalMoney(data[\"total_money\"])\n                            setTotalMoneyToday(data[\"total_money_today\"])\n                            setDriversCount(data[\"drivers_count\"])\n\n                            //console.log(data)\n                            setAllData(data)\n                            //console.log(`All data: ${allData}`)\n\n                            console.log(`total money: ${totalMoney}`)\n                            console.log(`total money today : ${totalMoneyToday}`) \n                            console.log(`drivers count: ${driversCount}`) \n                            console.log(`drivers list: ${partnerDrivers}`)\n                            //console.log(`DRIVERS: ${partnerDrivers[0].phone_number}`)\n                            console.log(partnerDrivers)\n                        }\n                        \n                    })                    \n                },1000)\n            }\n\n        }\n        \n        return(() => {\n            clearInterval(interval)\n        })\n       \n    }, [, \n        /*details, \n        allData, \n        partnerDrivers,\n        totalMoney,\n        totalMoneyToday,\n        driversCount,\n        authenticated,\n        socket */\n    ])\n\n    const Logout = () => {\n        setAuthentication(false)\n        setError(\"\")\n        setDetails({name:\"\", email:\"\", password:\"\"})\n        \n        return(() => {clearInterval(interval)})\n        \n    }\n\n    const submitHandler = e => {\n        e.preventDefault()\n        //Authenticate user:\n        socket.emit(\"authenticate\", {\n            name: details.name,\n            email: details.email,\n            password: details.password\n        })\n       \n        socket.on(\"authenticate-response\", (data) => {\n            \n            if(data.authenticated) {\n                //  Upon successful authentication:\n                setAuthentication(true)  \n                setName(details.name)\n                setEmail(details.email)\n                setPassword(details.password)\n              \n                if (interval === null ) {\n\n                    interval = setInterval(() => {\n                        console.log(\"Counting2......\")\n        \n                        socket.emit(\"getPartnerData\", {provider: details.name})\n            \n                        socket.on(\"getPartnerData-response\", (data) => {\n                            console.log(\"getting getPartnerData data\")\n                          \n                            setPartnerDrivers(data.drivers)\n                            setTotalMoney(data.total_money)\n                            setTotalMoneyToday(data.total_money_today)\n                            setDriversCount(data.drivers_count)\n\n                            console.log(`received data from socket\" ${data.total_money}`)\n                            console.log(`partners's total money2 : ${data.drivers[0]}`)\n                        })                    \n                    },1500) \n                }\n                             \n            }\n            else {\n\n                setError(\"No match found\")\n            }\n        })\n        \n    } \n    //\n    const driverData = () => {\n        return partnerDrivers.map((driver) => {\n            return <DriverRow driver={driver} />\n        })\n        \n    }\n\n    console.log(allData.drivers)\n    // styles:\n    const card = {\n        backgroundColor: \"#62bbde\"\n    }\n    const card_header = {\n        backgroundColor: \"#3183a3\",\n        \n    }\n    const form_style = {\n        width: 400,\n        margin: \"auto\",\n        marginTop: 100\n    }\n    // Returned content:\n    if (!authenticated) {\n        return(\n            \n            <div >\n                <div className=\"my-form\">\n                <form onSubmit={submitHandler} style={form_style}>\n                    <div className=\"form-inner\">\n                    <h2 style={{ width: 100, margin: \"auto\"}}>Login</h2>\n                    {(error != \"\") ? ( <div className=\"text-warning\" style={{width:200, margin:\"auto\",}}>{error}</div>) : \"\"}\n                    <div className=\"form-group\">\n                        <label htmlFor=\"name\">Name:</label>\n                        <input type=\"text\" name=\"name\" id=\"name\" className=\"form-control\"\n                                onChange={e => setDetails({...details, name: e.target.value})} value={details.name} >\n                        </input>\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"email\">Email:</label>\n                        <input type=\"email\" name=\"email\" id=\"email\" className=\"form-control\"\n                                onChange={e => setDetails({...details, email: e.target.value})} value={details.email}>\n                        </input>\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"password\">Password:</label>\n                        <input type=\"password\" name=\"password\" id=\"password\" className=\"form-control\"\n                                onChange={e => setDetails({...details, password: e.target.value})} value={details.password}>\n                        </input>\n                    </div>\n                    <input className=\"form-control\" id=\"submit-button\" type=\"submit\" value=\"LOGIN\" style={{ backgroundColor: \"#157ab0\"}}/>\n                    </div>\n                </form>\n                </div>\n            </div>\n        )\n\n    } else {\n        return(\n            <div >\n\n                <nav className=\"navbar navbar-expand-lg \" style={{ backgroundColor: \"#0b5054\"}}>\n                    <a className=\"navbar-brand\" href=\"#\" style={{color:\"white\", marginLeft: 100}}>Dashboard | {name}</a>\n\n                    <ul className=\"nav ml-auto\">\n                    <li className=\"nav-item\">\n                        <a className=\"nav-link active\" style={{marginRight: 45}}>\n                            <button className=\"btn btn-primary btn-sm\" type=\"submit\" onClick={Logout}>Logout\n                            </button></a>\n                    </li>\n                    \n                    </ul>\n                </nav>\n\n                <div className=\"jumbotron jumbotron-fluid text-center\">\n                    <div className=\"container\">\n                        <h1 className=\"display-4\">Welcome to your dashboard</h1>\n                        <p className=\"lead\">Additional data available upon request</p>\n                        <hr className=\"my-4\"></hr>\n                    </div>\n                </div>\n\n                <div className=\"container\">\n                    \n                    <div className=\"container\" >\n                        <div className=\"row text-center\">\n                            <div className=\"col-sm\">\n                                <div className=\"card\" style={card}>\n                                <div className=\"card-header\" style={card_header}>\n                                    Registered drivers \n                                </div>\n                                <div className=\"card-body\">\n                                    <h3>{ driversCount }</h3>\n                                </div>\n                                </div>\n                            </div>\n                            <div className=\"col-sm\">\n                                <div className=\"card\" style={card}>\n                                <div className=\"card-header\" style= {card_header}>\n                                    Gross amount\n                                </div>\n                                <div className=\"card-body\">\n                                    <h3>N$ { totalMoney }</h3>\n                                </div>\n                                </div>\n                            </div>\n                            <div className=\"col-sm\">\n                                <div className=\"card\" style={card}>\n                                <div className=\"card-header\" style={card_header}>\n                                    Today \n                                </div>\n                                <div className=\"card-body\">\n                                    <h3>N$ { totalMoneyToday }</h3>\n                                </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n\n                 \n                    <br></br>\n                    <div style={{marginBottom:150}}>\n                    <div className=\"card\" >\n                        <div className=\"card-header\">\n                            Registered drivers \n                        </div>\n                        <div className=\"card-body\">\n                        <table className=\"table-striped\" style={{ margin: 15}}>\n                                <thead className=\"thead-light\">\n                                    <tr>\n                                        <th>Profile</th>\n                                        <th>Name</th>\n                                        <th>Surname</th>\n                                        <th>Phone </th>\n                                        <th>Taxi Number</th>\n                                        <th>Plate number</th>\n                                        <th>Car brand</th>\n                                        <th>Status</th>\n                                        <th>Today (N$)</th>\n                                        <th>Connects (today)</th>\n                                        <th>Total (N$)</th>       \n                                        <th>Total connects</th>\n                                    </tr>\n\n                                </thead>\n                                <tbody>\n                                { driverData() }\n                                </tbody>\n                            </table> \n                            </div>\n                        </div>\n                </div>\n                </div>           \n            </div>\n        )\n    }\n}\n\n","/home/mack/Documents/Admin/Admin-App/client/partnerui/src/components/socket.js",[],{"ruleId":"29","severity":1,"message":"30","line":6,"column":8,"nodeType":"31","messageId":"32","endLine":6,"endColumn":19},{"ruleId":"29","severity":1,"message":"33","line":85,"column":10,"nodeType":"31","messageId":"32","endLine":85,"endColumn":15},{"ruleId":"29","severity":1,"message":"34","line":86,"column":10,"nodeType":"31","messageId":"32","endLine":86,"endColumn":18},{"ruleId":"29","severity":1,"message":"35","line":87,"column":10,"nodeType":"31","messageId":"32","endLine":87,"endColumn":14},{"ruleId":"29","severity":1,"message":"36","line":87,"column":16,"nodeType":"31","messageId":"32","endLine":87,"endColumn":23},{"ruleId":"37","severity":1,"message":"38","line":144,"column":8,"nodeType":"39","endLine":153,"endColumn":6,"suggestions":"40"},{"ruleId":"41","severity":1,"message":"42","line":144,"column":8,"nodeType":"39","messageId":"43","endLine":153,"endColumn":6},{"ruleId":"44","severity":1,"message":"45","line":242,"column":29,"nodeType":"46","messageId":"47","endLine":242,"endColumn":31},{"ruleId":"48","severity":1,"message":"49","line":273,"column":21,"nodeType":"50","endLine":273,"endColumn":99},{"ruleId":"48","severity":1,"message":"51","line":277,"column":25,"nodeType":"50","endLine":277,"endColumn":82},"no-unused-vars","'queryString' is defined but never used.","Identifier","unusedVar","'email' is assigned a value but never used.","'password' is assigned a value but never used.","'test' is assigned a value but never used.","'setTest' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'authenticated', 'details.name', 'driversCount', 'partnerDrivers', 'totalMoney', and 'totalMoneyToday'. Either include them or remove the dependency array.","ArrayExpression",["52"],"no-sparse-arrays","Unexpected comma in middle of array.","unexpectedSparseArray","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md",{"desc":"53","fix":"54"},"Update the dependencies array to be: [authenticated, details.name, driversCount, partnerDrivers, totalMoney, totalMoneyToday]",{"range":"55","text":"56"},[5131,5310],"[authenticated, details.name, driversCount, partnerDrivers, totalMoney, totalMoneyToday]"]